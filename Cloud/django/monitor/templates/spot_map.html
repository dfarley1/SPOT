{% verbatim %}  
<h1 class="text-center">{{ vm.curr_lot.name }}</h1>
{% endverbatim %}
{% load static %}

<img name="map_img" onload="resize" src="{% static "media/monitor/spot_graphic.png" %}" usemap="#map" border="0" width="100%">
<map name="map">
    <area shape="rect" coords="10,11,144,290" ng-click="vm.spot_info(0)">
    <area shape="rect" coords="151,11,285,290" ng-click="vm.spot_info(1)">
</map>

<script type="text/javascript">
var map_img = $("[name='map_img']")[0],
    old_width = 1280.0 //map_img.naturalWidth;

var resize = function() {
    var map = $("[name='map']"),
        scale = map_img.clientWidth / old_width;
        console.log("scale=" + map_img.clientWidth + "/" + old_width + "=" + scale);
    
    map.find("area").each(function(){
        var coords = $(this).attr("coords").split(",");
        console.log("old = " + coords);
        var new_coords = "";
        for (coord in coords) {
            new_coords += Math.round(coords[coord] * scale) + ',';
        }
        new_coords = new_coords.slice(0, -1);
        $(this).attr("coords", new_coords);
        console.log("new = " + $(this).attr("coords").split(","));
        old_width = map_img.clientWidth;
    });
};

window.onload = resize();
window.onresize = resize;
</script>
